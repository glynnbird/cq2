<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cloudant Query - Step 1</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="cq2.css">
  <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="cq2.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <div class="container-fluid">
    <div class="jumbotron">
      <h1>Cloudant Query Tutorial</h1>
      <h2>Step 1 - Create the Index</h2>
    </div>
    <p>Our 'movies' database contains nearly three thousand documents of this form:</p>
    <pre>
      {
          "_id": "304415",
          "_rev": "1-c5d63b15884b41a6b7cb7239fdac00d1",
          "title": "Mona Lisa Smile",
          "year": 2003,
          "rating": "PG-13",
          "runtime": "117 min",
          "genre": [
              "Drama"
          ],
          "director": "Mike Newell",
          "writer": [
              "Lawrence Konner",
              "Mark Rosenthal"
          ],
          "cast": [
              "Julia Roberts",
              "Kirsten Dunst",
              "Julia Stiles",
              "Maggie Gyllenhaal"
          ],
          "poster": "http://ia.media-imdb.com/images/M/MV5BMTI0NjEwNDgwOV5BMl5BanBnXkFtZTYwOTI1NTA3._V1_SX300.jpg",
          "imdb": {
              "rating": 6.4,
              "votes": 55,
              "id": "tt0304415"
          }
      }
    </pre>
    <p>The first thing we need to do is to instruct Cloudant to index each field within the object. We do this by posting some JSON to the the /movies/_index endpoint. In curl this would look like this:
      
    <pre>
      curl -X POST https://myaccount.cloudant.com/movies/_index -d '{ "index": {}, "type": "text"}'
    </pre>
    
    <p>In the above example we are not specifying which fields to index, so Cloudant will index all fields. Click the button below to perform this API call.</p>
    <p><a id="step1button" class="btn btn-primary btn-lg" href="Javascript:step1()" role="button">Create Index</button> </a></p>
    
    <div id="step1hidden">
      The server responded with:
      <pre id="step1response">
        
      </pre>
      
      <p>We can now proceed to Step 2 - Querying:</p>
      <p><a class="btn btn-primary btn-lg" href="step2.html" role="button">Step 2 <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></button> </a></p>
      
    </div>
    
    
  </div>
</body>
</html>